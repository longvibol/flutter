Week 7_2


import 'dart:convert';

import 'package:flutter/material.dart';
import 'package:http/http.dart' as http;

const productUrl = "fakestoreapi.com";

void main() {
  return runApp(Root());
}

class Root extends StatefulWidget {
  const Root({super.key});
  @override
  State<Root> createState() => _RootState();
}

class _RootState extends State<Root> {
  var products = []; // emtply array
  Future<void> getProduct() async {
    final url = Uri.https(productUrl, "products");
    final response = await http.get(url);
    print("respond = ${response.body}");

    // Convert
    final products = jsonDecode(response.body);

    this.products = products;
  }

  // when we get data we need to set state
  @override
  void setState(VoidCallback fn) {
    // TODO: implement setState
    super.setState(fn);
  }

  @override
  void initState() {
    getProduct();
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      home: Scaffold(
        body: ListView.builder(
            itemCount: products.length,
            itemBuilder: (context, index) {
              return ListTile(
                title: Text("${products[index]["title"]}"),
                leading: Image.network(products[index]['image']),
              );
            }),
      ),
    );
  }
}


=====================>


Result :

I/flutter ( 9498): Respond= [{"id":1,"title":"Fjallraven - Foldsack No. 1 Backpack, Fits 15 Laptops","price":109.95,"description":"Your perfect pack for everyday use and walks in the forest. Stash your laptop (up to 15 inches) in the padded sleeve, your everyday","category":"men's clothing","image":"https://fakestoreapi.com/img/81fPKd-2AYL._AC_SL1500_.jpg","rating":{"rate":3.9,"count":120}},{"id":2,"title":"Mens Casual Premium Slim Fit T-Shirts ","price":22.3,"description":"Slim-fitting style, contrast raglan long sleeve, three-button henley placket, light weight & soft fabric for breathable and comfortable wearing. And Solid stitched shirts with round neck made for durability and a great fit for casual fashion wear and diehard baseball fans. The Henley style round neckline includes a three-button placket.","category":"men's clothing","image":"https://fakestoreapi.com/img/71-3HjGNDUL._AC_SY879._SX._UX._SY._UY_.jpg","rating":{"rate":4.1,"count":259}},{"id":3,"title":"Mens Cotton Jacket","price":55.99,"description":"great outerw


So now we can get the data but it is JSON and it is String we need to convert to list in order to display on the flutter view. 

==> Main we need to Convert 



==================================== Main point 

1. import http 
2. crate function to handle get data 
3. Lift cycle : initState
4. show in display 
5. to refresh page : setState


- respond is the object 1 we don't know 















